<ng-template [ngIf]="dataset">
    <div style="clear: both"></div>
    <div fxLayout="row" fxLayout.xs="column" *ngIf="dataset">
        <div fxFlex="80%">
            <mat-card [formGroup]="form" data-cy="general-info">
                <mat-card-header class="general-header">
                    <div mat-card-avatar class="section-icon">
                        <mat-icon> assignment </mat-icon>
                    </div>
                    General information
                </mat-card-header>
                <mat-card-content>
                    <table>
                        <tr>
                            <th>Name</th>
                            <td>{{ dataset.datasetName || "-" }}</td>
                        </tr>
                        <tr>
                            <th>Description</th>
                            <td>
                                <span [innerHTML]="dataset.description || '-' | linky"></span>
                            </td>
                        </tr>
                        <tr>
                            <th>PID</th>
                            <td>
                                {{ dataset.pid }}
                            </td>
                        </tr>
                        <tr>
                            <th>Type</th>
                            <td>{{dataset.type }}</td>
                        </tr>
                        <tr>
                            <th>Creation Time</th>
                            <td>{{ dataset.creationTime | date: "yyyy-MM-dd
                                HH:mm" }}</td>
                        </tr>
                        <tr class="keywords-row">
                            <th>Keywords</th>
                            <mat-chip-set role="list" #keywordChips>
                                <mat-chip role="listitem" *ngFor="let keyword of dataset.keywords">
                                    {{ keyword }}
                                </mat-chip>
                            </mat-chip-set>
                        </tr>
                    </table>
                </mat-card-content>

            </mat-card>
            <mat-card [formGroup]="form">
                <mat-card-header class="creator-header">
                    <div mat-card-avatar class="section-icon">
                        <mat-icon> blur_linear </mat-icon>
                    </div>
                    Method Information:
                </mat-card-header>

                <mat-card-content>
                    <table>
                        <!-- Question 1: Electron Microscopy Method -->
                        <th class="questionnaire">Choose Electron Microscopy
                            Method</th>
                        <mat-form-field class="method-name">
                            <mat-label>experimental method</mat-label>
                            <mat-select formControlName="emMethod" name="method">
                                <mat-option *ngFor="let method of methodsList" [value]="experiment[method.value]">
                                    {{ method.viewValue }}
                                </mat-option>
                            </mat-select>
                        </mat-form-field>


                        <!-- Question 2: PDB Deposition -->
                        <tr>
                            <th class="questionnaire">Are you deposing coordinates with this
                                submission? (for PDB)</th>
                            <td>
                                <mat-radio-group formControlName="deposingCoordinates">
                                    <mat-radio-button name="deposingCoordinates" value=true checked>
                                        Yes
                                    </mat-radio-button>
                                    <mat-radio-button name="deposingCoordinates" value=false>
                                        No
                                    </mat-radio-button>
                                </mat-radio-group>
                            </td>
                        </tr>
                        <tr *ngIf="form.get('deposingCoordinates')?.value === 'true'">
                            <th>Has an associated map been deposited to EMDB?
                            </th>
                            <td>
                                <mat-radio-group formControlName="associatedMap">
                                    <mat-radio-button name="associatedMap" value=true checked>
                                        Yes
                                    </mat-radio-button>
                                    <mat-radio-button name="associatedMap" value=false>
                                        No
                                    </mat-radio-button>
                                </mat-radio-group>
                            </td>
                        </tr>

                        <!-- EMDB Identifier Field -->
                        <tr *ngIf="form.get('associatedMap').value === 'true'">
                            <th>EMDB Identifier</th>
                            <td>
                                <mat-form-field class="EMDB-ID">
                                    <mat-label>EMDB ID</mat-label>
                                    <input matInput formControlName="emdbId" />
                                </mat-form-field>
                            </td>
                        </tr>

                        <!-- Final Question: Composite Map -->
                        <tr>
                            <th class="questionnaire">Is this a composite map?</th>
                            <td>
                                <mat-radio-group formControlName="compositeMap">
                                    <mat-radio-button name="compositeMap" value=true>
                                        Yes
                                    </mat-radio-button>
                                    <mat-radio-button name="compositeMap" value=false checked>
                                        No
                                    </mat-radio-button>
                                </mat-radio-group>
                            </td>
                        </tr>
                    </table>
                </mat-card-content>
            </mat-card>

            <mat-card>
                <mat-card-header class="file-header">
                    <div mat-card-avatar class="section-icon">
                        <mat-icon> folder </mat-icon>
                    </div>
                    Choose files for deposition
                </mat-card-header>
                <mat-card-content>
                    <table>
                        <!-- ADD THE MAIN MAP -->
                        <tr>
                            <th class="file-types">Main Map</th>
                            <td>
                                <div style="display: flex; align-items: center;">


                                    <button class="fileChooser" mat-raised-button color="primary"
                                        (click)="fileInput1.click()">
                                        Choose File
                                    </button>

                                    <div *ngIf="selectedFile[emFile.MainMap]">
                                        <mat-icon>attach_file</mat-icon>
                                    </div>

                                    <input type="file" #fileInput1 (change)="onFileSelected($event, emFile.MainMap)"
                                        style="display: none;" />

                                    <!-- Selected file name (shown only when a file is selected) -->
                                    <div *ngIf="selectedFile[emFile.MainMap]" class="fileName">
                                        <p style="margin: 0;">Selected File: {{ selectedFile[emFile.MainMap].name }}
                                        </p>
                                    </div>
                                </div>
                            </td>
                        </tr>
                        <!-- ADD THE HALF MAP 1 -->
                        <tr>
                            <th class="file-types">Half Map (1)</th>
                            <td>
                                <div style="display: flex; align-items: center;">


                                    <button class="fileChooser" mat-raised-button color="primary"
                                        (click)="fileInput2.click()">
                                        Choose File
                                    </button>

                                    <div *ngIf="selectedFile[emFile.HalfMap1]">
                                        <mat-icon>attach_file</mat-icon>
                                    </div>

                                    <input type="file" #fileInput2 (change)="onFileSelected($event, emFile.HalfMap1)"
                                        style="display: none;" />

                                    <!-- Selected file name (shown only when a file is selected) -->
                                    <div *ngIf="selectedFile[emFile.HalfMap1]" class="fileName">
                                        <p style="margin: 0;">Selected File: {{ selectedFile[emFile.HalfMap1].name }}
                                        </p>
                                    </div>
                                </div>
                            </td>
                        </tr>
                        <!-- ADD THE HALF MAP 2 -->
                        <tr>
                            <th class="file-types">Half Map (2)</th>
                            <td>
                                <div style="display: flex; align-items: center;">


                                    <button class="fileChooser" mat-raised-button color="primary"
                                        (click)="fileInput3.click()">
                                        Choose File
                                    </button>

                                    <div *ngIf="selectedFile[emFile.HalfMap2]">
                                        <mat-icon>attach_file</mat-icon>
                                    </div>

                                    <input type="file" #fileInput3 (change)="onFileSelected($event, emFile.HalfMap2)"
                                        style="display: none;" />

                                    <!-- Selected file name (shown only when a file is selected) -->
                                    <div *ngIf="selectedFile[emFile.HalfMap2]" class="fileName">
                                        <p style="margin: 0;">Selected File: {{ selectedFile[emFile.HalfMap2].name }}
                                        </p>
                                    </div>
                                </div>
                            </td>
                        </tr>

                        <!-- ADD THE MASK MAP  -->
                        <tr>
                            <th class="file-types">Mask Map </th>
                            <td>
                                <div style="display: flex; align-items: center;">


                                    <button class="fileChooser" mat-raised-button color="primary"
                                        (click)="fileInput4.click()">
                                        Choose File
                                    </button>

                                    <div *ngIf="selectedFile[emFile.MaskMap]">
                                        <mat-icon>attach_file</mat-icon>
                                    </div>

                                    <input type="file" #fileInput4 (change)="onFileSelected($event, emFile.MaskMap)"
                                        style="display: none;" />

                                    <!-- Selected file name (shown only when a file is selected) -->
                                    <div *ngIf="selectedFile[emFile.MaskMap]" class="fileName">
                                        <p style="margin: 0;">Selected File: {{ selectedFile[emFile.MaskMap].name }}
                                        </p>
                                    </div>
                                </div>
                            </td>
                        </tr>
                        <!-- ADD THE ADDITIONAL MAP  -->
                        <tr>
                            <th class="file-types">Additional Map </th>
                            <td>
                                <div style="display: flex; align-items: center;">


                                    <button class="fileChooser" mat-raised-button color="primary"
                                        (click)="fileInput5.click()">
                                        Choose File
                                    </button>

                                    <div *ngIf="selectedFile[emFile.AddMap]">
                                        <mat-icon>attach_file</mat-icon>
                                    </div>

                                    <input type="file" #fileInput5
                                        (change)="onFileSelected($event, emFile.AddMap)"
                                        style="display: none;" />

                                    <!-- Selected file name (shown only when a file is selected) -->
                                    <div *ngIf="selectedFile[emFile.AddMap]" class="fileName">
                                        <p style="margin: 0;">Selected File: {{ selectedFile[emFile.AddMap].name
                                            }}</p>
                                    </div>
                                </div>
                            </td>
                        </tr>

                        <!-- ADD THE COORDINATES FILE  -->
                        <tr *ngIf="form.get('deposingCoordinates')?.value === 'true'">
                            <th class="file-types">Coordinates</th>
                            <td>
                                <div style="display: flex; align-items: center;">


                                    <button class="fileChooser" mat-raised-button color="primary"
                                        (click)="fileInput6.click()">
                                        Choose File
                                    </button>

                                    <div *ngIf="selectedFile[emFile.Coordinates]">
                                        <mat-icon>attach_file</mat-icon>
                                    </div>

                                    <input type="file" #fileInput6
                                        (change)="onFileSelected($event, emFile.Coordinates)" style="display: none;" />

                                    <!-- Selected file name (shown only when a file is selected) -->
                                    <div *ngIf="selectedFile[emFile.Coordinates]" class="fileName">
                                        <p style="margin: 0;">Selected File: {{ selectedFile[emFile.Coordinates].name
                                            }}</p>
                                    </div>
                                </div>
                            </td>
                        </tr>

                        <!-- ADD THE IMAGE  -->
                        <tr>
                            <th class="file-types"> Public Image </th>
                            <td>
                                <div style="display: flex; align-items: center;">


                                    <button class="fileChooser" mat-raised-button color="primary"
                                        (click)="fileInput7.click()">
                                        Choose File
                                    </button>

                                    <div *ngIf="selectedFile[emFile.Image]">
                                        <mat-icon>attach_file</mat-icon>
                                    </div>

                                    <input type="file" #fileInput7 (change)="onFileSelected($event, emFile.Image)"
                                        style="display: none;" />

                                    <!-- Selected file name (shown only when a file is selected) -->
                                    <div *ngIf="selectedFile[emFile.Image]" class="fileName">
                                        <p style="margin: 0;">Selected File: {{ selectedFile[emFile.Image].name }}</p>
                                    </div>
                                </div>
                            </td>
                        </tr>

                        <!-- ADD THE FCS CURVE   -->
                        <tr>
                            <th class="file-types">FSC-XML</th>
                            <td>
                                <div style="display: flex; align-items: center;">


                                    <button class="fileChooser" mat-raised-button color="primary"
                                        (click)="fileInput8.click()">
                                        Choose File
                                    </button>

                                    <div *ngIf="selectedFile[emFile.FSC]">
                                        <mat-icon>attach_file</mat-icon>
                                    </div>

                                    <input type="file" #fileInput8 (change)="onFileSelected($event, emFile.FSC)"
                                        style="display: none;" />

                                    <!-- Selected file name (shown only when a file is selected) -->
                                    <div *ngIf="selectedFile[emFile.FSC]" class="fileName">
                                        <p style="margin: 0;">Selected File: {{ selectedFile[emFile.FSC].name }}</p>
                                    </div>
                                </div>
                            </td>
                        </tr>
                        <!-- UPLOAD FILES DONE -->

                 
                        <button class="submitDep" mat-raised-button color="primary" (click)="onDepositClick()">
                            Start Deposition
                        </button>

                    </table>
                </mat-card-content>
            </mat-card>


        </div>
    </div>
</ng-template>